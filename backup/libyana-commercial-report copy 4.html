<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تقرير القسم التجاري - ليبيانا - 2024</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/mapdata/countries/ly/ly-all.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --libyana-primary: #B8208B;
            --libyana-dark: #8B1A6B;
            --libyana-light: #D946A6;
            --libyana-accent: #E85BB8;
            --dark-navy: #0A1929;
            --dark-charcoal: #132F4C;
            --dark-blue: #1A2942;
            --teal-accent: #00D9FF;
            --cyan-accent: #00BCD4;
            --white: #FFFFFF;
            --light-gray: #B2BAC2;
            --border-color: #1E3A52;
            --text-primary: #FFFFFF;
            --text-secondary: #B2BAC2;
            --success: #00E676;
        }

        body {
            font-family: 'Cairo', sans-serif;
            color: var(--text-primary);
            background: var(--dark-navy);
            line-height: 1.6;
            direction: rtl;
            position: relative;
            margin: 0;
            padding: 0;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('backgrounds/Background_Main.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.03;
            pointer-events: none;
            z-index: 0;
        }

        .page {
            max-width: 100%;
            margin: 0 auto;
            background: var(--dark-navy);
            position: relative;
            z-index: 1;
        }

        /* Professional Header */
        .header {
            background: var(--dark-charcoal);
            padding: 60px 60px 40px;
            border-bottom: 2px solid var(--border-color);
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo-box {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--libyana-primary), var(--libyana-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 2em;
            font-weight: 800;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(184, 32, 139, 0.3);
        }

        .company-info h1 {
            font-size: 2em;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 5px;
        }

        .company-info p {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .report-meta {
            text-align: left;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .report-meta .year {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--teal-accent);
            margin-bottom: 5px;
        }

        .report-title-section {
            border-right: 4px solid var(--teal-accent);
            padding-right: 20px;
        }

        .report-title-section h2 {
            font-size: 2.2em;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 10px;
        }

        .report-title-section p {
            font-size: 1em;
            color: var(--text-secondary);
        }

        /* Video Hero Section */
        .video-hero {
            position: relative;
            width: 100%;
            min-height: 600px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-background {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
            z-index: 1;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(10, 25, 41, 0.85) 0%, rgba(19, 47, 76, 0.75) 50%, rgba(10, 25, 41, 0.85) 100%);
            z-index: 2;
        }

        .video-content {
            position: relative;
            z-index: 3;
            text-align: center;
            padding: 80px 60px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .video-header {
            margin-bottom: 50px;
            color: var(--white);
        }

        .video-header h2 {
            font-size: 3em;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            background: linear-gradient(135deg, var(--white), var(--teal-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .video-header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 500;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            color: var(--light-gray);
        }

        .video-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .video-stat-item {
            background: rgba(19, 47, 76, 0.6);
            backdrop-filter: blur(10px);
            padding: 35px 25px;
            border-radius: 12px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            transition: all 0.4s ease;
        }

        .video-stat-item:hover {
            transform: translateY(-8px);
            border-color: var(--teal-accent);
            box-shadow: 0 12px 32px rgba(0, 217, 255, 0.3);
            background: rgba(19, 47, 76, 0.8);
        }

        .video-stat-value {
            font-size: 2.8em;
            font-weight: 800;
            display: block;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--teal-accent), var(--cyan-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
        }

        .video-stat-label {
            font-size: 1em;
            color: var(--light-gray);
            font-weight: 500;
        }

        @media (max-width: 1024px) {
            .video-hero {
                min-height: 500px;
            }

            .video-content {
                padding: 60px 30px;
            }

            .video-header h2 {
                font-size: 2em;
            }

            .video-header p {
                font-size: 1.1em;
            }

            .video-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .video-stat-value {
                font-size: 2em;
            }

            .video-stat-label {
                font-size: 0.9em;
            }
        }

        @media (max-width: 640px) {
            .video-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Executive Summary */
        .executive-summary {
            background: var(--dark-navy);
            padding: 80px 60px;
            border-bottom: 1px solid var(--border-color);
            max-width: 1400px;
            margin: 0 auto;
        }

        .summary-title {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 40px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--teal-accent);
            display: inline-block;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .summary-item {
            background: var(--dark-charcoal);
            padding: 35px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .summary-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--teal-accent), var(--cyan-accent));
        }

        .summary-item.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .summary-item h3 {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--teal-accent);
            margin-bottom: 15px;
        }

        .summary-item p {
            font-size: 0.95em;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        /* KPI Section */
        .kpi-section {
            padding: 80px 60px;
            background: var(--dark-charcoal);
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
        }

        .section-header.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header h2 {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 10px;
        }

        .section-header p {
            color: var(--text-secondary);
            font-size: 1em;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }

        .kpi-card {
            background: var(--dark-navy);
            border: 1px solid var(--border-color);
            padding: 40px 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            opacity: 0;
            transform: translateY(20px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--teal-accent), var(--cyan-accent));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .kpi-card.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .kpi-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 32px rgba(0, 217, 255, 0.2);
            border-color: var(--teal-accent);
        }

        .kpi-card:hover::before {
            transform: scaleX(1);
        }

        .kpi-icon {
            font-size: 2.2em;
            margin-bottom: 20px;
            display: inline-block;
            padding: 18px;
            width: 75px;
            height: 75px;
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.15), rgba(0, 188, 212, 0.1));
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(0, 217, 255, 0.2);
        }

        .kpi-icon img {
            width: 42px;
            height: 42px;
            object-fit: contain;
            filter: brightness(0) saturate(100%) invert(79%) sepia(96%) saturate(2841%) hue-rotate(157deg) brightness(104%) contrast(106%);
        }

        .kpi-card:hover .kpi-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .kpi-value {
            font-size: 3em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--teal-accent), var(--cyan-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            line-height: 1;
        }

        .kpi-label {
            font-size: 0.95em;
            color: var(--light-gray);
            letter-spacing: 0.3px;
            margin-bottom: 18px;
            font-weight: 500;
            line-height: 1.5;
        }

        .kpi-change {
            font-size: 0.95em;
            color: var(--success);
            font-weight: 700;
            display: inline-block;
            padding: 8px 16px;
            background: rgba(0, 230, 118, 0.15);
            border-radius: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 230, 118, 0.3);
        }

        .kpi-change.negative {
            color: #FF5252;
            background: rgba(255, 82, 82, 0.15);
            border: 1px solid rgba(255, 82, 82, 0.3);
        }

        .kpi-card:hover .kpi-change {
            transform: scale(1.05);
        }

        /* Data Table */
        .table-section {
            padding: 80px 60px;
            background: var(--dark-navy);
            border-top: 1px solid var(--border-color);
            max-width: 1400px;
            margin: 0 auto;
        }

        .data-table {
            width: 100%;
            background: var(--dark-charcoal);
            border: 1px solid var(--border-color);
            border-collapse: collapse;
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .data-table thead {
            background: linear-gradient(135deg, var(--dark-blue), var(--dark-charcoal));
            color: var(--white);
        }

        .data-table th {
            padding: 18px;
            text-align: right;
            font-weight: 600;
            font-size: 0.95em;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--teal-accent);
        }

        .data-table td {
            padding: 18px;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.95em;
            color: var(--text-secondary);
        }

        .data-table tbody tr:hover {
            background: var(--dark-blue);
        }

        .data-table strong {
            color: var(--teal-accent);
            font-weight: 600;
        }

        .positive {
            color: var(--success);
            font-weight: 600;
        }

        .negative {
            color: #FF5252;
            font-weight: 600;
        }

        /* Charts */
        .charts-section {
            padding: 80px 60px;
            background: var(--dark-charcoal);
            max-width: 1400px;
            margin: 0 auto;
        }

        .chart-grid {
            display: flex;
            flex-direction: column;
            gap: 50px;
            margin-top: 30px;
        }

        .chart-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .chart-row.single {
            grid-template-columns: 1fr;
        }

        .chart-row.reverse {
            direction: ltr;
        }

        .chart-wrapper {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .chart-card {
            background: var(--dark-navy);
            border: 1px solid var(--border-color);
            padding: 35px;
            border-radius: 8px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .chart-card.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-explanation {
            padding: 25px;
            direction: rtl;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
            background: var(--dark-blue);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .chart-explanation.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .chart-explanation h4 {
            font-size: 1.15em;
            color: var(--teal-accent);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .chart-explanation p {
            font-size: 0.9em;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .chart-explanation .highlight {
            background: var(--dark-charcoal);
            padding: 15px;
            border-right: 3px solid var(--teal-accent);
            margin-top: 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .chart-explanation .highlight strong {
            color: var(--teal-accent);
            font-size: 0.95em;
        }

        .chart-title {
            font-size: 1.15em;
            font-weight: 600;
            color: var(--white);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border-color);
        }

        .chart-container {
            height: 300px;
            position: relative;
        }

        /* Footer */
        .footer {
            background: var(--dark-blue);
            color: var(--white);
            padding: 50px 60px;
            text-align: center;
            font-size: 0.95em;
            border-top: 2px solid var(--border-color);
        }

        .footer p {
            opacity: 0.8;
            margin: 8px 0;
        }

        .footer strong {
            color: var(--teal-accent);
        }

        /* Watermark */
        .watermark {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, var(--teal-accent), var(--cyan-accent));
            color: var(--dark-navy);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: 700;
            opacity: 0.95;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.3);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }

            .chart-row {
                grid-template-columns: 1fr;
            }

            .chart-row.reverse {
                direction: rtl;
            }

            .header, .kpi-section, .charts-section, .table-section, .executive-summary {
                padding: 40px 30px;
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <!-- Header -->
        <header class="header">
            <div class="header-top">
                <div class="logo-section">
                    <div class="logo-box">L</div>
                    <div class="company-info">
                        <h1>ليبيانا للهاتف المحمول</h1>
                        <p>Libyana Mobile Phone</p>
                    </div>
                </div>
                <div class="report-meta">
                    <div class="year">2024</div>
                    <p>التقرير السنوي</p>
                </div>
            </div>
            <div class="report-title-section">
                <h2>تقرير الأداء التجاري</h2>
                <p>نظرة شاملة على مؤشرات الأداء الرئيسية والنتائج المالية للقسم التجاري</p>
            </div>
        </header>

        <!-- Video Hero Section -->
        <section class="video-hero">
            <video class="video-background" autoplay muted loop playsinline>
                <source src="videos/01.mp4" type="video/mp4">
            </video>
            <div class="video-overlay"></div>
            <div class="video-content">
                <div class="video-header">
                    <h2>رحلة النجاح والتميز</h2>
                    <p>نظرة شاملة على إنجازاتنا وتطورنا خلال عام 2024</p>
                </div>
                <div class="video-stats">
                    <div class="video-stat-item">
                        <span class="video-stat-value">2.46M</span>
                        <span class="video-stat-label">مشترك نشط</span>
                    </div>
                    <div class="video-stat-item">
                        <span class="video-stat-value">850M</span>
                        <span class="video-stat-label">إيرادات (د.ل)</span>
                    </div>
                    <div class="video-stat-item">
                        <span class="video-stat-value">95%</span>
                        <span class="video-stat-label">تغطية 4G</span>
                    </div>
                    <div class="video-stat-item">
                        <span class="video-stat-value">92%</span>
                        <span class="video-stat-label">رضا العملاء</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Executive Summary -->
        <section class="executive-summary">
            <h2 class="summary-title">الملخص التنفيذي</h2>
            <div class="summary-grid">
                <div class="summary-item">
                    <h3>الأداء المالي</h3>
                    <p>حقق القسم التجاري لعام 2024 إيرادات إجمالية بلغت 850 مليون دينار ليبي، بنمو 18.5% مقارنة بالعام السابق، مما يعكس قوة الأداء التشغيلي واستمرار النمو في جميع قطاعات الأعمال.</p>
                </div>
                <div class="summary-item">
                    <h3>قاعدة المشتركين</h3>
                    <p>وصل عدد المشتركين النشطين إلى 2.46 مليون مشترك، بزيادة صافية قدرها 400 ألف مشترك خلال العام، مع الحفاظ على حصة سوقية رائدة بنسبة 42.5%.</p>
                </div>
                <div class="summary-item">
                    <h3>البنية التحتية</h3>
                    <p>تم توسيع شبكة 4G لتغطي 95% من السكان، مع إضافة 600 موقع خلوي جديد، مما أدى إلى تحسين جودة الخدمة ورضا العملاء بنسبة 92%.</p>
                </div>
            </div>
        </section>

        <!-- KPI Section -->
        <section class="kpi-section">
            <div class="section-header">
                <h2>مؤشرات الأداء الرئيسية</h2>
                <p>نتائج عام 2024 مقارنة بالعام السابق</p>
            </div>

            <!-- Financial Performance Indicators -->
            <div class="section-header" style="margin-top: 40px;">
                <h2 style="font-size: 1.4em; color: var(--libyana-primary);">أداء المؤشرات المالية</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/revenue 01.png" alt="Revenue Icon"></div>
                    <div class="kpi-value" data-target="850">0</div>
                    <div class="kpi-label">إجمالي الإيرادات (مليون د.ل)</div>
                    <div class="kpi-change">↑ 18.5%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Graph.png" alt="Graph Icon"></div>
                    <div class="kpi-value" data-target="235">0</div>
                    <div class="kpi-label">إيرادات الربع الرابع (مليون د.ل)</div>
                    <div class="kpi-change">↑ 4.4%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/avg Graph.png" alt="Market Share Icon"></div>
                    <div class="kpi-value" data-target="42.5" data-decimals="1">0</div>
                    <div class="kpi-label">حصّة السوق (%)</div>
                    <div class="kpi-change">↑ 3.2%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/revenue 02.png" alt="Profit Icon"></div>
                    <div class="kpi-value" data-target="2850">0</div>
                    <div class="kpi-label">الأرباح</div>
                    <div class="kpi-change">↑ 26.6%</div>
                </div>
            </div>

            <!-- Subscriber Base Indicators -->
            <div class="section-header" style="margin-top: 40px;">
                <h2 style="font-size: 1.4em; color: var(--libyana-primary);">مؤشرات قاعدة المشتركين</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Users.png" alt="Users Icon"></div>
                    <div class="kpi-value" data-target="2465000">0</div>
                    <div class="kpi-label">إجمالي المشتركين</div>
                    <div class="kpi-change">↑ 16.3%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Diamond.png" alt="ARPU Icon"></div>
                    <div class="kpi-value" data-target="95">0</div>
                    <div class="kpi-label">متوسط الإيرادات للمستخدم (ARPU) (د.ل)</div>
                    <div class="kpi-change">↑ 5.5%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Star.png" alt="Satisfaction Icon"></div>
                    <div class="kpi-value" data-target="92" data-suffix="%">0%</div>
                    <div class="kpi-label">مؤشر رضا المشتركين</div>
                    <div class="kpi-change">↑ 3.5%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Indicator 01.png" alt="Churn Icon"></div>
                    <div class="kpi-value" data-target="1.9" data-decimals="1" data-suffix="%">0%</div>
                    <div class="kpi-label">معدل الانحسار الشهري (Churn)</div>
                    <div class="kpi-change">↓ 0.9%</div>
                </div>
            </div>

            <!-- Usage and Consumption Indicators -->
            <div class="section-header" style="margin-top: 40px;">
                <h2 style="font-size: 1.4em; color: var(--libyana-primary);">مؤشرات الاستخدام والاستهلاك</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/4G.png" alt="Data Icon"></div>
                    <div class="kpi-value" data-target="26.5" data-decimals="1">0</div>
                    <div class="kpi-label">متوسط استهلاك البيانات (جيجابايت)</div>
                    <div class="kpi-change">↑ 112%</div>
                </div>
            </div>

            <!-- Network Performance Indicators -->
            <div class="section-header" style="margin-top: 40px;">
                <h2 style="font-size: 1.4em; color: var(--libyana-primary);">مؤشرات أداء الشبكة</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Tower.png" alt="Network Coverage Icon"></div>
                    <div class="kpi-value" data-target="95" data-suffix="%">0%</div>
                    <div class="kpi-label">تغطية شبكة 4G</div>
                    <div class="kpi-change">↑ 10%</div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/Indicator 02.png" alt="Speed Icon"></div>
                    <div class="kpi-value" data-target="45">0</div>
                    <div class="kpi-label">متوسط سرعة 4G (Mbps)</div>
                    <div class="kpi-change">↑ 80%</div>
                </div>
            </div>

            <!-- Digital Transformation Indicators -->
            <div class="section-header" style="margin-top: 40px;">
                <h2 style="font-size: 1.4em; color: var(--libyana-primary);">مؤشرات التحول الرقمي وقنوات الخدمة</h2>
            </div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon"><img src="icons/App Users.png" alt="App Users Icon"></div>
                    <div class="kpi-value" data-target="1850000">0</div>
                    <div class="kpi-label">عدد مستخدمي التطبيق</div>
                    <div class="kpi-change">↑ 35.2%</div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="section-header">
                <h2>التحليلات المالية والتشغيلية</h2>
                <p>رسوم بيانية توضح اتجاهات الأداء خلال عام 2024</p>
            </div>

            <div class="chart-grid">
                <!-- Revenue and Subscribers Charts - Page 1 -->
                <div class="chart-row">
                    <div class="chart-wrapper">
                        <div class="chart-card">
                            <h3 class="chart-title">الإيرادات الفصلية (مليون د.ل)</h3>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-explanation">
                            <h4>نمو مستدام في الإيرادات</h4>
                            <p>شهد عام 2024 نموًا متواصلًا في الإيرادات الفصلية، حيث ارتفعت من 185 مليون دينار في الربع الأول إلى 235 مليون في الربع الرابع.</p>
                            <div class="highlight">
                                <strong>النقطة الرئيسية:</strong> نمو سنوي بنسبة <strong>18.5%</strong>
                            </div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <div class="chart-card">
                            <h3 class="chart-title">نمو قاعدة المشتركين</h3>
                            <div class="chart-container">
                                <canvas id="subscriberChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-explanation">
                            <h4>توسع قاعدة المشتركين</h4>
                            <p>حققت ليبيانا نموًا قويًا في قاعدة المشتركين خلال عام 2024، حيث ارتفع العدد من 2.15 مليون إلى 2.46 مليون.</p>
                            <div class="highlight">
                                <strong>إنجاز رئيسي:</strong> إضافة <strong>400,000</strong> مشترك جديد
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Service Revenue and Data Usage Charts - Page 2 -->
                <div class="chart-row">
                    <div class="chart-wrapper">
                        <div class="chart-card">
                            <h3 class="chart-title">توزيع الإيرادات حسب الخدمة</h3>
                            <div class="chart-container">
                                <canvas id="serviceChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-explanation">
                            <h4>تحول نحو الخدمات الرقمية</h4>
                            <p>تُظهر البيانات تحولاً واضحاً في هيكل الإيرادات، حيث أصبحت خدمات البيانات المصدر الأول للدخل بنسبة 45%.</p>
                            <div class="highlight">
                                <strong>التوجه الاستراتيجي:</strong> الاستثمار في البنية التحتية للبيانات
                            </div>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <div class="chart-card">
                            <h3 class="chart-title">معدلات استخدام البيانات (GB/شهر)</h3>
                            <div class="chart-container">
                                <canvas id="dataUsageChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-explanation">
                            <h4>نمو متسارع في استهلاك البيانات</h4>
                            <p>نما متوسط الاستهلاك الشهري من 12.5 GB في يناير إلى 26.5 GB في ديسمبر بزيادة 112%.</p>
                            <div class="highlight">
                                <strong>قوة الشبكة:</strong> قادرة على <strong>مضاعفة الاستهلاك</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Share Chart - Page 3 -->
                <div class="chart-row single">
                    <div class="chart-wrapper">
                        <div class="chart-card">
                            <h3 class="chart-title">الحصة السوقية (%)</h3>
                            <div class="chart-container">
                                <canvas id="marketShareChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-explanation">
                            <h4>المقارنة مع المنافسين</h4>
                            <p>تحتفظ ليبيانا بالصدارة في السوق الليبي بحصة 42.5%، محققة نمواً مستمراً من 35.8% عام 2020 إلى 42.5% عام 2024.</p>
                            <div class="highlight">
                                <strong>الريادة:</strong> الحفاظ على المركز الأول بفارق <strong>12.7%</strong> عن أقرب منافس
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Network Coverage Map -->
        <section class="charts-section" style="background: var(--light-bg);">
            <div class="section-header">
                <h2>خريطة التغطية الجغرافية</h2>
                <p>مواقع أبراج 4G وتوزيع التغطية عبر ليبيا</p>
            </div>

            <div class="chart-row">
                <div class="chart-card" style="grid-column: 1 / -1; max-width: 100%; margin: 0; padding: 30px 40px;">
                    <h3 class="chart-title">شبكة التغطية 4G - ليبيانا</h3>
                    <div id="libya-map-container" style="height: 700px; width: 100%; margin: 20px 0;"></div>

                    <!-- Legend -->
                    <div style="margin-top: 30px; display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 16px; height: 16px; background: #B8208B; border-radius: 50%; border: 2px solid white;"></div>
                            <span style="font-size: 0.9em; color: #586069;">مدن رئيسية (500+ برج)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 14px; height: 14px; background: #D946A6; border-radius: 50%; border: 2px solid white;"></div>
                            <span style="font-size: 0.9em; color: #586069;">مدن كبرى (200-500 برج)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 12px; height: 12px; background: #E85BB8; border-radius: 50%; border: 2px solid white;"></div>
                            <span style="font-size: 0.9em; color: #586069;">مدن متوسطة (<200 برج)</span>
                        </div>
                    </div>
                </div>

                <!-- Map Statistics -->
                <div class="chart-explanation" style="grid-column: 1 / -1; margin-top: 30px;">
                    <h4>التوزيع الجغرافي للبنية التحتية</h4>
                    <p>تنتشر أبراج ليبيانا عبر جميع المناطق الليبية، مع تركيز على المدن الرئيسية والمناطق المأهولة بالسكان. تتميز شبكتنا بتغطية شاملة تصل إلى 95% من المناطق السكنية.</p>
                    <p>يبلغ إجمالي الأبراج 2,850 برج، منها 1,200 برج في المنطقة الغربية، 700 برج في المنطقة الشرقية، و950 برج في المناطق الوسطى والجنوبية.</p>
                    <div class="highlight">
                        <strong>الإنجاز البارز:</strong> إضافة <strong>600 برج جديد</strong> خلال عام 2024، بزيادة 26.6% عن العام السابق، مما حسّن التغطية والجودة بشكل كبير.
                    </div>
                </div>
            </div>
        </section>

        <!-- Financial Performance Table -->
        <section class="table-section">
            <div class="section-header">
                <h2>الأداء المالي التفصيلي</h2>
                <p>مقارنة النتائج المالية الفصلية لعام 2024</p>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>الربع</th>
                        <th>الإيرادات (مليون د.ل)</th>
                        <th>النمو الفصلي</th>
                        <th>النمو السنوي</th>
                        <th>الهامش الربحي</th>
                        <th>ARPU (د.ل)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>الربع الأول</strong></td>
                        <td>185</td>
                        <td>-</td>
                        <td class="positive">+15.6%</td>
                        <td>24.3%</td>
                        <td>86</td>
                    </tr>
                    <tr>
                        <td><strong>الربع الثاني</strong></td>
                        <td>205</td>
                        <td class="positive">+10.8%</td>
                        <td class="positive">+17.2%</td>
                        <td>26.1%</td>
                        <td>91</td>
                    </tr>
                    <tr>
                        <td><strong>الربع الثالث</strong></td>
                        <td>225</td>
                        <td class="positive">+9.8%</td>
                        <td class="positive">+19.5%</td>
                        <td>27.8%</td>
                        <td>96</td>
                    </tr>
                    <tr>
                        <td><strong>الربع الرابع</strong></td>
                        <td>235</td>
                        <td class="positive">+4.4%</td>
                        <td class="positive">+21.0%</td>
                        <td>28.5%</td>
                        <td>95</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Service Performance Table -->
        <section class="table-section">
            <div class="section-header">
                <h2>أداء الخدمات التفصيلي</h2>
                <p>مقارنة الأداء لجميع خطوط الخدمات</p>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>نوع الخدمة</th>
                        <th>عدد المستخدمين</th>
                        <th>الإيرادات (مليون د.ل)</th>
                        <th>% من الإيرادات</th>
                        <th>النمو السنوي</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>خدمات البيانات</strong></td>
                        <td>2,450,000</td>
                        <td>380</td>
                        <td>44.7%</td>
                        <td class="positive">+45.8%</td>
                    </tr>
                    <tr>
                        <td><strong>المكالمات الصوتية</strong></td>
                        <td>2,465,000</td>
                        <td>285</td>
                        <td>33.5%</td>
                        <td class="negative">-5.0%</td>
                    </tr>
                    <tr>
                        <td><strong>الرسائل النصية</strong></td>
                        <td>2,120,000</td>
                        <td>95</td>
                        <td>11.2%</td>
                        <td class="negative">-8.7%</td>
                    </tr>
                    <tr>
                        <td><strong>خدمات القيمة المضافة</strong></td>
                        <td>890,000</td>
                        <td>90</td>
                        <td>10.6%</td>
                        <td class="positive">+28.6%</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p><strong>ليبيانا للهاتف المحمول</strong> | Libyana Mobile Phone</p>
            <p>© 2024 جميع الحقوق محفوظة | تقرير القسم التجاري</p>
        </footer>

        <!-- Watermark -->
        <div class="watermark">ليبيانا 2024</div>
    </div>

    <script>
        // Animated Counter Function
        function animateCounter(element) {
            const target = parseFloat(element.getAttribute('data-target'));
            const decimals = parseInt(element.getAttribute('data-decimals')) || 0;
            let suffix = element.getAttribute('data-suffix') || '';

            // Get suffix from initial text if not in attribute
            if (!suffix && element.textContent) {
                const match = element.textContent.match(/[^\d.,]+$/);
                if (match) suffix = match[0];
            }

            const duration = 1500;
            const increment = target / (duration / 16);
            let current = 0;

            const updateCounter = () => {
                current += increment;
                if (current < target) {
                    element.textContent = current.toFixed(decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ",") + suffix;
                    requestAnimationFrame(updateCounter);
                } else {
                    element.textContent = target.toFixed(decimals).replace(/\B(?=(\d{3})+(?!\d))/g, ",") + suffix;
                }
            };

            updateCounter();
        }

        // Intersection Observer
        const observerOptions = {
            threshold: 0.2,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');

                    // Animate counters every time they come into view
                    const counters = entry.target.querySelectorAll('.kpi-value[data-target]');
                    counters.forEach(counter => {
                        // Reset counter to 0 before animating
                        const suffix = counter.getAttribute('data-suffix') || '';
                        counter.textContent = '0' + suffix;
                        // Animate the counter
                        animateCounter(counter);
                    });
                } else {
                    // Reset when scrolling away
                    const counters = entry.target.querySelectorAll('.kpi-value[data-target]');
                    counters.forEach(counter => {
                        const suffix = counter.getAttribute('data-suffix') || '';
                        counter.textContent = '0' + suffix;
                    });
                }
            });
        }, observerOptions);

        // Observe elements
        document.querySelectorAll('.section-header, .summary-item, .kpi-card, .chart-card, .chart-explanation, .chart-wrapper, .data-table').forEach(el => {
            observer.observe(el);
        });

        // Chart Colors
        const chartColors = {
            primary: '#00D9FF',
            light: '#00BCD4',
            accent: '#B8208B',
            gray: '#B2BAC2',
            gridColor: '#1E3A52',
            textColor: '#B2BAC2'
        };

        // Store chart instances
        const chartInstances = {};

        // Revenue Chart
        function createRevenueChart() {
            try {
                const canvas = document.getElementById('revenueChart');
                if (!canvas) {
                    console.error('Revenue chart canvas not found');
                    return;
                }
                if (chartInstances.revenue) {
                    chartInstances.revenue.destroy();
                }
                chartInstances.revenue = new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: ['الربع الأول', 'الربع الثاني', 'الربع الثالث', 'الربع الرابع'],
                    datasets: [{
                        type: 'bar',
                        label: 'الإيرادات',
                        data: [185, 205, 225, 235],
                        backgroundColor: [
                            'rgba(0, 217, 255, 0.7)',
                            'rgba(0, 217, 255, 0.8)',
                            'rgba(0, 217, 255, 0.9)',
                            'rgba(0, 217, 255, 1)'
                        ],
                        borderColor: chartColors.primary,
                        borderWidth: 2,
                        borderRadius: 10
                    }, {
                        type: 'line',
                        label: 'الاتجاه',
                        data: [185, 205, 225, 235],
                        borderColor: chartColors.light,
                        backgroundColor: 'transparent',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 7,
                        pointBackgroundColor: chartColors.light,
                        pointBorderColor: '#0A1929',
                        pointBorderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                font: { family: 'Cairo' },
                                usePointStyle: true,
                                padding: 15,
                                color: chartColors.textColor
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor,
                                callback: function(value) {
                                    return value + ' م.د.ل';
                                }
                            },
                            grid: { color: chartColors.gridColor }
                        },
                        x: {
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            },
                            grid: { display: false }
                        }
                    }
                }
            });
            } catch (error) {
                console.error('Error creating revenue chart:', error);
            }
        }

        // Subscriber Chart
        function createSubscriberChart() {
            try {
                const canvas = document.getElementById('subscriberChart');
                if (!canvas) {
                    console.error('Subscriber chart canvas not found');
                    return;
                }
                if (chartInstances.subscriber) {
                    chartInstances.subscriber.destroy();
                }
                chartInstances.subscriber = new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: ['الربع الأول', 'الربع الثاني', 'الربع الثالث', 'الربع الرابع'],
                    datasets: [{
                        label: 'المشتركون',
                        data: [2150000, 2242000, 2347000, 2465000],
                        backgroundColor: chartColors.primary,
                        borderRadius: 10,
                        borderWidth: 2,
                        borderColor: chartColors.primary
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor,
                                callback: function(value) {
                                    return (value / 1000000).toFixed(1) + 'M';
                                }
                            },
                            grid: { color: chartColors.gridColor }
                        },
                        x: {
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            },
                            grid: { display: false }
                        }
                    }
                }
            });
            } catch (error) {
                console.error('Error creating subscriber chart:', error);
            }
        }

        // Service Revenue Chart
        function createServiceChart() {
            try {
                const canvas = document.getElementById('serviceChart');
                if (!canvas) {
                    console.error('Service chart canvas not found');
                    return;
                }
                if (chartInstances.service) {
                    chartInstances.service.destroy();
                }
                chartInstances.service = new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: ['البيانات', 'المكالمات', 'الرسائل', 'القيمة المضافة'],
                    datasets: [{
                        label: 'الإيرادات (مليون د.ل)',
                        data: [380, 285, 95, 90],
                        backgroundColor: [
                            chartColors.primary,
                            chartColors.light,
                            chartColors.accent,
                            chartColors.gray
                        ],
                        borderColor: [
                            chartColors.primary,
                            chartColors.light,
                            chartColors.accent,
                            chartColors.gray
                        ],
                        borderWidth: 2,
                        borderRadius: 10
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.x + ' مليون د.ل (' +
                                           ((context.parsed.x / 850) * 100).toFixed(1) + '%)';
                                }
                            },
                            backgroundColor: 'rgba(19, 47, 76, 0.9)',
                            titleColor: chartColors.primary,
                            bodyColor: chartColors.textColor
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor,
                                callback: function(value) {
                                    return value + ' م.د.ل';
                                }
                            },
                            grid: { color: chartColors.gridColor }
                        },
                        y: {
                            ticks: {
                                font: { family: 'Cairo', size: 12 },
                                color: chartColors.textColor
                            },
                            grid: { display: false }
                        }
                    }
                }
            });
            } catch (error) {
                console.error('Error creating service chart:', error);
            }
        }

        // Data Usage Chart
        function createDataUsageChart() {
            try {
                const canvas = document.getElementById('dataUsageChart');
                if (!canvas) {
                    console.error('Data usage chart canvas not found');
                    return;
                }
                if (chartInstances.dataUsage) {
                    chartInstances.dataUsage.destroy();
                }
                chartInstances.dataUsage = new Chart(canvas, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
                    datasets: [{
                        label: 'استهلاك البيانات',
                        data: [12.5, 13.2, 14.1, 15.3, 16.8, 18.2, 19.5, 21.0, 22.3, 23.8, 25.1, 26.5],
                        borderColor: chartColors.primary,
                        backgroundColor: 'rgba(0, 217, 255, 0.15)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: chartColors.primary,
                        pointBorderColor: '#0A1929',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            },
                            grid: { color: chartColors.gridColor }
                        },
                        x: {
                            ticks: {
                                font: { family: 'Cairo', size: 10 },
                                color: chartColors.textColor
                            },
                            grid: { display: false }
                        }
                    }
                }
            });
            } catch (error) {
                console.error('Error creating data usage chart:', error);
            }
        }

        // Market Share Chart
        function createMarketShareChart() {
            try {
                const canvas = document.getElementById('marketShareChart');
                if (!canvas) {
                    console.error('Market share chart canvas not found');
                    return;
                }
                if (chartInstances.marketShare) {
                    chartInstances.marketShare.destroy();
                }
                chartInstances.marketShare = new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    datasets: [
                        {
                            label: 'ليبيانا',
                            data: [35.8, 38.2, 39.3, 41.0, 42.5],
                            backgroundColor: chartColors.primary
                        },
                        {
                            label: 'المنافس أ',
                            data: [32.5, 31.8, 31.2, 30.5, 29.8],
                            backgroundColor: chartColors.gray
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            },
                            grid: { color: chartColors.gridColor }
                        },
                        x: {
                            ticks: {
                                font: { family: 'Cairo' },
                                color: chartColors.textColor
                            },
                            grid: { display: false }
                        }
                    }
                }
            });
            } catch (error) {
                console.error('Error creating market share chart:', error);
            }
        }

        // Chart observer to animate charts on scroll
        const chartObserverOptions = {
            threshold: 0.3,
            rootMargin: '0px'
        };

        const chartObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const chartId = entry.target.querySelector('canvas')?.id;

                    // Create/recreate charts when they come into view
                    switch(chartId) {
                        case 'revenueChart':
                            createRevenueChart();
                            break;
                        case 'subscriberChart':
                            createSubscriberChart();
                            break;
                        case 'serviceChart':
                            createServiceChart();
                            break;
                        case 'dataUsageChart':
                            createDataUsageChart();
                            break;
                        case 'marketShareChart':
                            createMarketShareChart();
                            break;
                    }
                }
            });
        }, chartObserverOptions);

        // Observe all chart containers
        document.querySelectorAll('.chart-card').forEach(card => {
            if (card.querySelector('canvas')) {
                chartObserver.observe(card);
            }
        });

        // Initialize charts on page load
        window.addEventListener('load', () => {
            // Add a small delay to ensure DOM is fully ready
            setTimeout(() => {
                try {
                    createRevenueChart();
                    createSubscriberChart();
                    createServiceChart();
                    createDataUsageChart();
                    createMarketShareChart();
                } catch (error) {
                    console.error('Error initializing charts:', error);
                }
            }, 100);
        });

        // Libya Map with 4G Sites using Highmaps
        (async () => {
            const topology = await fetch('https://code.highcharts.com/mapdata/countries/ly/ly-all.topo.json')
                .then(response => response.json());

            const cityData = [
                ['طرابلس', 32.8872, 13.1913, 680],
                ['بنغازي', 32.1191, 20.0686, 520],
                ['مصراتة', 32.3743, 15.0878, 380],
                ['سبها', 27.0377, 14.4283, 320],
                ['الزاوية', 32.7572, 12.7278, 280],
                ['صبراتة', 32.7933, 12.4889, 240],
                ['زليتن', 32.4675, 14.5687, 220],
                ['غريان', 32.1667, 13.0167, 190],
                ['طبرق', 32.0819, 23.9590, 180],
                ['اجدابيا', 30.7554, 20.2263, 150],
                ['ترهونة', 32.4333, 13.6333, 140],
                ['الخمس', 32.6542, 14.2633, 130],
                ['درنة', 32.7569, 22.6394, 120],
                ['البيضاء', 32.7627, 21.7557, 110]
            ];

            Highcharts.mapChart('libya-map-container', {
                chart: {
                    map: topology,
                    backgroundColor: '#0A1929'
                },

                title: {
                    text: null
                },

                credits: {
                    enabled: false
                },

                mapNavigation: {
                    enabled: true,
                    buttonOptions: {
                        verticalAlign: 'bottom'
                    }
                },

                tooltip: {
                    useHTML: true,
                    backgroundColor: 'rgba(19, 47, 76, 0.95)',
                    borderColor: '#00D9FF',
                    style: {
                        fontFamily: 'Cairo',
                        color: '#FFFFFF'
                    }
                },

                series: [{
                    name: 'ليبيا',
                    borderColor: '#00D9FF',
                    borderWidth: 2,
                    color: '#132F4C',
                    states: {
                        hover: {
                            color: '#1A2942'
                        }
                    },
                    enableMouseTracking: false
                }, {
                    type: 'mapbubble',
                    name: 'مواقع 4G',
                    joinBy: null,
                    minSize: '8%',
                    maxSize: '12%',
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}',
                        style: {
                            fontFamily: 'Cairo',
                            fontSize: '11px',
                            fontWeight: '600',
                            color: '#FFFFFF',
                            textOutline: '2px #0A1929'
                        },
                        y: -20
                    },
                    tooltip: {
                        pointFormat: '<div style="text-align: right; font-family: Cairo; padding: 8px;">' +
                                     '<strong style="color: #00D9FF; font-size: 15px;">{point.name}</strong><br/>' +
                                     '<span style="color: #B2BAC2; font-size: 13px;">عدد الأبراج: <strong style="color: #00D9FF;">{point.z}</strong></span>' +
                                     '</div>'
                    },
                    data: cityData.map(city => {
                        const towers = city[3];
                        let color = '#00BCD4';

                        if (towers >= 500) {
                            color = '#00D9FF';
                        } else if (towers >= 200) {
                            color = '#00BCD4';
                        }

                        return {
                            name: city[0],
                            lat: city[1],
                            lon: city[2],
                            z: towers,
                            color: color,
                            marker: {
                                lineColor: '#0A1929',
                                lineWidth: 2
                            }
                        };
                    })
                }]
            });
        })();
    </script>
</body>
</html>
